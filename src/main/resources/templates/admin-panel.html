<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Админ-панель</title>
</head>

<body>
<h1>Панель администратора</h1>

<div id="reports-list">
    <p>Загрузка жалоб...</p>
</div>

<script>
    async function loadReports() {
        const resp = await fetch('/reports', {method: 'POST'});
        const reports = await resp.json();
        const container = document.getElementById('reports-list');
        container.innerHTML = '';

        if (reports.length === 0) {
            container.innerHTML = '<p>Нет новых жалоб</p>';
            return;
        }

        const ul = document.createElement('ul');
        reports.forEach(r => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = `/report/${r.id}`;
            a.textContent = `Жалоба на пользователя ${r.reportedUserName}: "${r.messageContent}"`;
            li.appendChild(a);
            ul.appendChild(li);
        });
        container.appendChild(ul);
    }

    document.addEventListener('DOMContentLoaded', loadReports);
</script>
</body>
</html>
